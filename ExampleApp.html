<!doctype html>
<html><head>
    <style type='text/css'>
        html { font-family:Helvetica; color:#222; background:#aaa}
        h1 { color:steelblue; font-size:24px; margin-top:24px; }
        button { margin:0 10px 10px; font-size:14px; }
        .logLine { border-bottom:1px solid #ccc; padding:4px 2px; font-family:courier; font-size:12px; }
        </style>
</head><body>
    <h1>WebViewJavascriptBridge Demo1</h1>
    <script>
        window.onerror = function(err) {
            log(err)
        }
    function connectWebViewJavascriptBridge(callback) {
        if (window.WebViewJavascriptBridge) {
            callback(WebViewJavascriptBridge)
        } else {
            document.addEventListener('WebViewJavascriptBridgeReady', function() {
                                      callback(WebViewJavascriptBridge)
                                      }, false)
        }
    }
    
    var uniqueId = 1
    function log(data) {
        var text = document.getElementById('text')
        var el = document.createElement('div')
        el.className = 'logLine'
        el.innerHTML = uniqueId++ + ':' + JSON.stringify(data)
        if (text.children.length) { text.insertBefore(el, text.children[0]) }
        else { text.appendChild(el) }
    }
    connectWebViewJavascriptBridge(function(bridge)
                                   {
                                   //初始化bridge
                                   bridge.init(function(message, responseCallback) {})
                                   var ua = navigator.userAgent;
                                   var checker = {
                                   iphone: ua.match(/(iPhone|iPod|iPad)/),
                                   blackberry: ua.match(/BlackBerry/),
                                   android: ua.match(/Android/)
                                   };
                                   if (checker.android){}
                                   else if (checker.iphone){
                                   bridge.send('setShareURL$https://www.zhihu.com/question/50685306',function(responseCallback)
                                               {
                                               })
                                   bridge.send('setShareICON$https://pic3.zhimg.com/80/fbc8f3723a4beffba8daa4a6c778c1b1_hd.jpg',function(responseCallback)
                                               {
                                               })
                                   bridge.send('setShareTITLE$在《黑暗之魂》中传火究竟是一种怎样的体验？',function(responseCallback)
                                               {
                                               })
                                   }
                                   else{
                                   alert("不支持当前浏览器");
                                   }
                                   }
                                   
                                   
                                   </script>
    <div id='buttons'></div> <div id='text'></div>
</body></html>

